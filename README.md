# Курсовая работа DFR (+Docker)

**"Трекер Привычек" представляет собой API для отслеживания привычек, 
который позволяет пользователям создавать, редактировать и удалять 
свои привычки, а также получать напоминания через Telegram.**

## Установка и запуск

*На компьютере должен быть установлен Docker и docker-compose 
(инструкции по установке на сайте https://www.docker.com/)!*

1. Клонируйте репозиторий с проектом:
   ```bash
   git clone https://github.com/dimanskr/habit_tracker.git
   ```
2. Скопируйте файл env.sample в .env:
Пропишите в нём настройки подключения к базе данных (минимум POSTGRES_DB),
TELEGRAM_TOKEN для получения сообщений в ваш бот 
(его можно узнать в Telegram BotFather), а также другие настройки. 
([шаблон файла .env](.env.sample))


3. Запустите docker-compose:

   ``` bash
   docker-compose up -d --build
   ```
   *Backend приложение будет доступно по адресу http://127.0.0.1:8000/*

   Остановка контейнеров: 
   ``` bash
     docker-compose stop
   ```
   Удаление контейнеров: 
   ``` bash
     docker-compose down
   ```

4. Выполнение команды внутри контейнера `app` выглядит так: 
   ``` bash
   docker-compose exec app <здесь ваша команда>
   ```
   Создайте учетную запись администратора кастомной командой для доступа к админке:
   ``` bash
   docker-compose exec app python manage.py csu
   ```
   
   *Админка доступна по адресу http://127.0.0.1:8000/admin/*

   *email: admin@mail.ru* \
   *пароль: 11111111*


5. Создайте пользователяей в админке или через эндпоинт `/users/register/`: 


   На эндпоинте `/users/login/` получаем токен `access`,
    который нужно использовать для доступа к другим эндпоинтам как `Bearer token`. 


   Через админку или эндпоинт `/users/<pk>/` задайте пользователю 
   `tg_chat_id` для получения сообщений в Telegram.


## "Эндпоинты пользователей"
| path                               | methods               | description                  |
|------------------------------------|-----------------------|------------------------------| 
| `/users/register/`                 | `POST`                | создание пользователя        |
| `/users/login/`                    | `POST`                | вход                         |
| `/users/token/refresh/`            | `POST`                | сброс токена                 |
| `/users/<id>`                      | `GET`, `PUT`, `PATCH` | просмотр и изменение профиля |

## "Эндпоинты привычек"
| path                             | methods                        | description                                        |
|----------------------------------|--------------------------------|----------------------------------------------------|
| `/habits/`                       | `GET`, `POST`                  | просмотр своих привычек и создание привычки        |
| `/habits/<id>/`                  | `GET`, `PUT` `PATCH`, `DELETE` | просмотр своей привычки, её изменение или удаление |
| `/public-habits/`                | `GET`                          | просмотр списка публичных привычек                 | 

Документация доступна по адресам:
http://127.0.0.1:8000/swagger/ и http://127.0.0.1:8000/redoc/